job:
  env:
  - secure: "lGqs21tJgE7BzWKfHMtD/s1kwPUAWeMkUYJal/63wAPrTmFtr8ZVnW3YiYX7NJ0L/vEH2Gn9m99WZnfysPkj3UubU5fv3JyPdnxvlUeXukspZRk3pBZGAGyHNvKCH7eEDfVvTaLbca2IXgl498+E08RgO5O7AVu6NJ90y9NKQ70QLRh5POvqAbhPEPFBsWpR6Om42HQY9NrKbvbnqaOyM+Mb53Iy39YQTxHMLUaDyR62SjVRZ2whc3ZbsBr4CPT9imbYuN22y+IUACWToaXbDrHyUWOVfWW7/NHfHk7pDYAWq4RkIpwmGQ/c9xpXjPdA/6oL8n4FZlypPou1OuWvec1SIy2HSj7VRZECWrR1+st6pQEms7OreZvGkjG+/2UdoA/2pIvz2nwbJEMTvJVyeDVKIefW1yQJ3LrPQqIb9N8Qeq9+3QIsimbYLtzB6X3WMQGarwE3MrLWgV35QCkTnbRQ+ph7ZYw4UrKUH3M4qvcytxn6tYwic2rRpUB6S4fepEOTgTmmWISkn1zVxmXmlFvV08w9A3dIPo1yRTgnv/MM9Iv2B/hpyOCow+JiobXVzxAyk5Ku+i5lm1x234q3zYjxoEVRh5qrJ0zMQOXmQqQOtXoMOlmDXDjEbh1YU/kKbz7lRFuZCq1YDQ4MOWazTKXWezDCXYUIRIZeimEptF8="
  - secure: "BAtf5+8NytwE6iAOShpSK38n72RnOcNEossUcLqiAOo+eyQHtUuQjQWgGvptvjjH7d9RChAu7ZyDp2IT9B9PbQoaTRIeTx6I5XTVyjlC2S78B36jtn42t8FysoeLrT/6X5Z5a0Fb8H6tlcuXHni1vMsGVta98V+ynq6y5DHYg07JVa2S+5+TD/vseU0KPip6/Ed8HD7Y+Z4C7mGup4Bj1aCZq8jT+9vEvXYsUGIdP1KJLWX4EtRhbdV+sVUft6iiDw4TNkbL71SwXUEULtxtgbLxHogazUix5EqqRWZK2jh6kS+gPubriuI7wi6dCJHjSoEXx6X9zpvhes5TjqlXpjhfAewQM/r4NSQ6dpsYcwcciNzyU0fYo/yXH6tlfJPlQ/SUUwqG1A71ZkTyc760hy4D+8NldLfn0Wq+YXF+aj50bei6A43iDm6YtHTVJIx5EDLjI4NA1W9xSEEC7muJD0j6DB+g3aSEs9IpPnRLfvmWeh3iZpLzH34XsBl4RDgi0ZDrMGQ3tOFgcoGAiscJtIJ3XkqxmCNVzoQlOilCGvVAugLkds3initW9NI44DxYR2jvxMqX3D1bvfSOdoXyFXwjQxiC7mjR3d/myt5oHg6cqD1082Qz2B1Du4SlCUKL92JtGIGTyqmz2CjNp4VmfcF1rojn5TwVVbm2Vn+OBr0="
  - secure: "hlP2JX75z3Njk0IbJGQT+U0qek2VtGPMluc82T2o7KJcMTX3a8MCswUPlB0Kch/p6ePU7SwKaKKqHgkG2sz7/1ry6olUIq/E/2IR65TR14GmAHaHnMPFGk5D78/jgr61w/29Au+nl9VRhbCgHwWFPL5JJUXkPRo8EUo1DYuaihFKnA+ZX5IwrHrw8HI3pvCS49alZmgkXbizml/am1xJMdTc1u3DsrNQUikNyJj6taxzgYQxCnAbWhqqpjt13CT9R8XMZhTxGaP0KrU+WR15rQrdz4Pk1W3l93zl1ottogycWN7YusmdzBS6KVjLk6cmZD33azDbYEQ8U4KXKOpr3s2iasB1/oIEKleeAtyAyq/YXEH+4Mf/d4WfL6vpqxM5ZjHll9KLmef4reXVnYPbJ+ovk0CHzT0KnXFehv77cX7iLt4blW8t3msZur62rbglB7Pub9U2HZf6b2gJ2fSbqY9+zsGbff0b1T00ghpQXvjrQ0b3+UIGDtDnwwtKT/+w6QVVyYvVdsUtgkT/5bZxiihhkcV1fwX8egfmzFglVmTkQL6tv392hzNNysjc1rpmCYD4yH+rOPym2yn53naxfp+RW8Y/3FPJxGkIQntODKVES4ZIdrzo6DdFkbfl7JzS+xQnP+lKSiiVWHJAPxSgcpYj2lj7lsbuFkrNJvfP83Y="

  script:
  - docker build --target test --tag todo-app:test .
  - docker run todo-app:test todo_app/tests/test_trello.py
  - docker run --env-file .env.test todo-app:test todo_app/tests/test_app.py
  - docker run --env TRELLO_BOARD_ID --env TRELLO_AUTH --env TRELLO_TOKEN todo-app:test todo_app/tests_e2e/test_e2e.py