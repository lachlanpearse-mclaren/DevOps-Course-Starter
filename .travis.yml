services:
- docker

env:
  global:
  - secure: "fYxZZXHYY2UKtqy7qbiZWuNNTLuDeDRrGt0TUqLYm4UmNBBnOQfhZrMBPslhu74LC6Y5WIjBXI4rI7jKc8kSdTah82yxcNNLEuXE6VkfJFHxASSUyRZsOra4zAUqzrZ/CfpOGxomo3tgM734ioyJPo4gxoObLBqKH1lcXtbfmb1VhRWv86HirXveRCTAQaBLbzldGXK0nwgOsfCtU5fQJC5y5gmBpW33JAqKHBTemLqRtS+87txnICbuJlVMbUYUvCaOZPy+cJ6uIWJjZBehc6mswEiH6sBYCgNMj1KEl4omJdTEe2wKHWypCZnu4w3qDINZl7rr+THm0uTuo78K0mhUEa4C+ILcj3BxT1GGrBk3pv6/9wl7yV0emp5AVQ5wSW19E/pxeJace4Kw3qI7RABfuh35CvdYboxONnSKy4y3aoFkORuoeXcLp8C6RnJClsjLchFAhvmXInZ56bFx7sbwXvWVkxSkP0SIC0lbfe8rNbn7PTvXEpRSHVGRM/6dhH7PKRyOmmsvPuTQ5aCf6/b7gvym988Rj31sr54CWKJ4QYRKqeSfsEZDSWsRbT6NRjSsMVDBpMPH31uI+RSZuNndO62ueVa0r4DsjDSf735+d2cNtHPEto+GURJAIkow6l4Xdyatp7kCQ5tUl/58gqDWIXgu/oCOgsW0Z58Ek44="
  - secure: "kP5peDSNSOBxX1iIb1JsU4sJqf/1RVerEZl8/tGiJH5htYShT+qOgPI+GWoTOtx++nz7I05+VvLbloizN2uKbCc4/gH5HqsqBKLsLC5OLiSEaAq8Z3XJvcng1Gq2lWaM2xR1qk/EGwZJTx1QarRI1t97jkiFI3t9sReMUOrsHjAG77pgKFWTgp4u4kbEdgO7Eq3xzN2h+5T3mhypfX76sPXsg2tigVxPyODIQFf8VfGRwAJEN39GF8uL9spyW/V52oEBl5qrE6zZEJmLwqcZmkyzEbHTM1dI1vyEpWoW/cdDyBR7nwdiu8y8XrqvqGCSXquGTh0B3Vx/iHaq5gOsaacNm5RI47BQpLCA37BFciE4ENvxubRq45eN4sXeaqr210ODblDxG6xq8R25nLEmJC8jeV0MXbyuU10iJL5id0ZQMlDf9+9AfNQwUUwG3+Z5qQi2UL84R2fKAG2/i6CxWcUi/9VnqblCGb+AFunV/RAsVVmry/QiF1jxzZLcOHvvkLrNyW8/0pDD5nWX/Kh5gcwRe8Dq2YRdAoq9S7iPPiUgL/f8uwZdPNptJczfITDyv7o6ooat3rP6R38NueMR6MaG7pjzKzNklGzSTsH2RoxTryKeE+EOeQ/8BqkhJx6kyAMd87u2tiB65gtcXj26/s34kVpNUGV11cggbYVxA34="
  - secure: "fkIMpdB51cpOgehQo+AUthfJrxOIZWUu917F/7GpmjOxyPcVO16pROIlSiC6J1GY+o/5sD1r8bMP4LKCZ7rtBM4SUaGqEsDTwt8wPUvJy21JVxd5NCjkeJVWR3FNFzhzcg5dk/WTbZnAuOW88wWgay9NvAXFoDF/JJkkAj6Z1XrNZFcrDLfZDdDdRZUVzc02o1iJQTpnZAEG7c1Q3dEDmLRkg1ZmOZaMW+pIQuJBEGqK1tpzQSpxen5L7nzJCcb1cAMSOqTHrVEY2fCf/RS6fVedbXzJetdUbnGe0bWBpRghuIKaTozedsMlFmUiHaicNz0WAXj2nKUQTETiPWHXBaahbwjT8J1ElRBKU2QSvHQ/Gy6JqM7c0WtnqE4zXfDqplMzCtw3AcrqcUZBKO9qeT/XsNRNnHag3Q7S6OWDk4RfAmQpE6u0J9c74fRPQrr9YDLcgPqwRfsZs0aGtoIAHiqWXmeK6JV/m2U1+p6MzU/jFcq6E2UB0AP0s2FxIDf+Ch6sdSgPoqy5+jvjyFSHjxikaHjsqkFCCJuWfULzayxciOG8g72jvmU3mlwHCXUm3H6+p5JaDcONYQFQJPWeYaW8xvu1W/6sr8n/V/UcP/wXFhV0SAvtxkdrRanc3mt2fqj736Q72guSPklxYH9PFXZMeROMyejHhsGQKB+M/tc="
  - secure: "ecuxkQPXiepkS1ZQOZP5Ews5blwd/9KAEqI9QyrWX/XbZPXkzGbkRHxDLwSWW+hk1d07MwdWQpvsaWWEGpNOTW89vrsZ7rU9y+R4LATEjfdm9ehxV+voK1nnq3yTtPXhpwlHssHqYLCWfTG15DnXCPcXw4wdyLTaaLFyGZEqAjzzzpc4LJtldimocS18hnB4s/P5lZtPqgocgw9/xrBqERdh6t7gr5g/zl4s+xtLAaKhlp3jRJqEqbr/GOUt86PUe1249skaSS4lWwV+EK13otXJkmChVK0ZFMBwr9dkwDrm2HPx2IhBB+eNOMroXLvVF6MtoKMYnXgfPnl4BN6yz0Z7T/dMr33VHai21igMaZx7NhM2AjQjsRIAfS2o0TYo4xubvZpz40KiS3mj/lMGhDYXky2YV41gATnQerS0J4YmzZ9vZAvAqCZqlTOUz+qDD9ZFjOoorDBOddOtIsd6Q/ffauKlH/TKQDKt0VGMVcXTFibmC2WTiPSMRjCyDz/w7l/0KRSYVGIZsCtKAW+887Di/S7espp7rFQduCF90/0Zn38xMjpIfmFArNKs5RDBKUYEOWBImBoQ/TETou0yImxk09ActbdA8qOmdZST5XP9yPAS7oeDooTUy7XxEl7mvL8DzRUSO77o11B3I8WEjX7oEkuySbJ4Tn2tDCeOH/U="
  - secure: "j/s43b2W0EBi53kJ3sZUt98efmvWy8ZUysNqomGEu53HwHkDEjg6JC58oIAt2WePgPgjgx3aNnz3UZrcZk7TRW2zXikbyeaCJaSh5YIBRchjoWS83t5815ppS41mbiwQ1cP/KwKoN3DqJIdl/HR8QONoAaZeW58uA4f0C9qLtSfjBt085supI5OSZuNbYefLagTxwaep8BH24oJGgUvQhJlAP0iTsWK0sVgc3Dw1xSYkzhm2XptV2HaMJDK1iJ16zzv7Jgu6t0FKIpi4O0Zc2KgJMQSELkbzHxU/joGCDVkpI5xAlUyGKuwYaMnK9t7E2QL4YWyG9ai3pEqCCx124oXJSyYbVjvE3GLLyKDek06r/dVWEgfyOZ4Ui5VfAtrpjZyMlETcLcOl3ELYM9+dLb2qTJPR73iomAwWrPPhCES1mOM+85CEUhOaDGz0qqHoqjjcjQTBOdSpcWS176/+ot5toMUWY5V7b9YmbaG84hN2jRfqerkxRNexvXtZzQESCPeiyD4fxi8iL3vzOImlrg7DmUlfpes39Z7HL9Sr8EvCW3ce4m+7csEmrsteJa+2h3dC0v7MVBX2zt+3TbQw6MuLTGWKSm+EQI8IxWW8U5/M9JfviiL+rYwE48DRDtvvygy78FumkwtCrqgaqwwUMG5NdnOskWTHjYTOVXDPII0="
  - secure: "BDr+gipB/jx3/Yw1ZOyYvNVYV1RC6PXk1VJPI12x0dlSmXOGbH703yrBywmeo3udT2m7SnKvnBYgPHSG5aAZlUtfTF/03GINng5GkR5V4pQLLAd0ooSZAShNlACGvcjfEuYLq1ju2GiEtRs41QTp6xqZ2kVTTwdNIfRjKt7B5hTZkSw+M+FDcTgYK8OAZFpJV2Qydiz7BA91IBI1jG/S4/IQRIIWmJcky++0k5me3pnP8CdE+EOqiIM7m7IV0RMuOFZCMSHxsKGtGSnNOPSAmRMg5gZVjWmAlnxJvxUIoCGH7bmnjYztd7qamhjoeGYyUUf76iCgo8NoY5Q4EIiWRJpzclH7035HTWOezFyO7pYLgrs0xnGM32/skCbY/3EPR4gQxXn64k6WjSvgVxSaRu6qyJ0A2us/ykxTzcYF02XCAITm/EsFBEUBQSDYl+8a1UoVWM1PV/9HYN00dhSpbAhE/4M4DMmb9UPOQqCCu6yVaj+tAp8Xnug/L9y0r0WKvXrmAZ5XyctunztG9iNNTMl+lZvOTxFjTOsju27KlxQBMg4QmZig1G2UFbEEpNLliqG57dE7j4pYKrx1UcwIiayfV2afkhTpTNloGQzlANRKngg5zWpfbyL/fRMZGS0b+UJLyHUGVM/RnBe3yf2p3Rjt5fZgw1yVWOAq/vT+Qxk="
  - secure: "I7rYEOwyppdcyRXGxjdmEXZXsQwOALyCDVCLtEcwZtBIAN1cjATJ7N81TUelpzAMJqh0i2SQVMAEIitItxd0tCYaxQAjW9qVUp66Y0lR5iA5BcTbhJcbMvKsuU9I+5VyCGHzjkcpiHIN0wD1KkAYDKZmCy57Y8efx50qet9yzv7Kp6VjTQk/Q6LRBeP9PeYMcRRtMnpEFeJYUy/I+uumeuwSgabGmltxw0gD3p/TsVmtmvhErYkD7ujfTaj6ajw9el2H/UX25eJNyghN3NRNv01zrJH2SROg0jift+nuYzGvF1Mk5ToJat2XjpLsZVWNHF1iEqtsJzzSqpQzwiDaLOF+FIxuFxL8IR6TbBQHz4TZYZUTYCljNblXrYt4LYV5xFGguk5C37x8hM3YaWMG3uo317CEwQPuETA1r7XbOPrCreV7pdyi2hx0pC04dvvOhuEUvGCcPygLCojSvibP3txPD3hgfktBdGdFlxMWCaAz1Q8f7G9vByS+io+IVVlUip/rXmGWspfDDVPzHxOA2cfHZcGUkwiA7zf1opBNIDfULNSHD5HS8ECV4yigFCGpkZ3MTCiGuc1d3MILdhvK4LvqHPMhcCYWH5PL5xMDBnNgawTxdkZNKDh9+e94rfpEXrmM6rttJfVbK8r3lA22OK2Sdx148XFJf9rYBfMUZoo="
  - secure: "jC9JqNzkOMrWwdQJE3zPeNW6ZC3Y0d2fuNHTPoIGEP2pEFJ7Da0nao/45LhCvP+nDkLcwxzxQ+cdowi1IkfxAKM9jBsOaix8w6hgF43kbeOhnh3AQw/9n2xyCAipDzwpY4NbcFDF0FXXrE6Mi4ruaQjOQXWOCpxnY5kF96IFM5tjJLajMYHHHxO13ZCkTyX99KG4kDYv3h8dVUYEngPQofByqs0cR1YZHRXU8VWCPvYp3i8pG3CeMUJMQEN0XejWEVO09f0iz4xqKBZ6IfHx7wm0ShX99iWF6l/xo3GqCFZicTMTvfnTnfEoTlho/Hl0WWJIiKANzgLKTw/gWH30ybEitjneJ5AkuG1DrcuN0rPJxIFAfaYMdxguzvezOj2CaB1Kq6wUYgpyBpF4BxoeBS4fU01/Ecy6gO5vCmIVcIp707AkE/EmgdfwpHOtO2nZRfWCASzAxR9ik9xl37iG0oo2/GsHQDzuyb4hTqHDwpKMws8RFyAIQWiuvwuizuTHEymutLCtyUN9kXuAuFTxEZH1txmjJPnT42WlxZoin4F5JfXi99uu/+0SkrmnIKkGypmc+p2Ym1Rp+MctU/4Bn6ipsKi0W4hUwnVC8yGVKCvdyp3HhJYWCjnxLQBObcq/JMVPgF7tetWGzLoEMJdFd+VezGEsh20Jm4ZtPoZT0zY="
  - secure: "c6svmk4QIvt99Mdpsmn4tjdFX6krtgKbWjtvKYHi3RzcwUSsVlDmjdSxOe3tAx02Hs6Opn1OoLRhnKxugwEIs+LMRVBiZLH65ekLadMvczBJLN8/YGIBYZyhTE1/JgrSppruIhPWrKoVZ7zo2/Oy5UKnqNyTjvNpc7WhMUWByzuH9whhjvaM6VIRHG5wYcH48atG2LgNpr0Tq4JnLzzhglAY7VfJd2AwO4a2C10sameQRQ9AQyZBTPLHC/7zQhWz/AnFlt3ztDX+ClQ9pSs1nnY1rB17+rwt0/KyM4AqB9rk85nDWlcltcr3gqiMtwjrlKZ2vTD1ZnZDa3uDjAyRAr/Iy3yUL8Cp9iQemlT0Vzd8lyUjQH+JhpA1IMjxdIEHgPnt6UwDS/TZFiPCdrV2nlD8VVpgtLgR0doO9NlcFjdYGiNziBySrDl8R8+sC2f8a4z2d2yD+YMj3mmYjyO7bfmSDUP7kZYuVZolJnPeP5/xLyvhj7CiVQKgSGRoIdc6E8MTzRPKPV8wi/WdNfq4OMfFxqCOrWjXum634EF1iiik8iUFgKiChXFGRQvyOohy4oqe9XYomdg1dIesbbEJ9AjVdnn5yKS4IroBF49k5OK15VQEyoUAeBHhAb2r1lwbMBGmUYTpMaZMOOWTsRXBi/8lkrukgXGGJV+qsAeIJZc="
  - secure: "EkeZwRR972Om8FFJi4yM115awAyDvxsKTbdStYSR4sg/KQuuP/3vBkGGrovKqkqrNz5dj34YqvbkoCqOaDuOWNNktQqg+50kxa0DlNlfqvSt4ZztKvAa/8HK7srx5hx33Yu0s8gVdt0tUKhUSD2pYUop4iJ+qv1C3FkfjJkZNzuUr+8RBMe8FdsdMbWQUNxDkYU63WJ+f9UNPiJNX21E5GN1T3Gs9rp4r6kqvYef0x4J4s6ZsIpNh5FSzc5D4GgX+aqeVyGZKkUhBVf5XamjJCtdlqZFV3SlRanpT6e/7E7n8UMh+gbIzPhaen4NFVZTOuxzsA/dbbZHO3xltYWZct79dBPXgCctiNnseH/ykPh4rGRHTRD4atnpEb2X+bHGZ+2sO823tA2PdXdh9fKVz1KCZdq02ETonJX9PMsVUtWbEqFbOpNnxb0QAvQJlHohcasMA8/yEIYOXtTM3mvdjybbPXEOr1OMofxvBJvUPCiuIuqRL4UChyDf7hO/oHAs94368KQh7JoYpIw1kZSqH042EVQ5zbdjY7LgGm2bnu5nSm+S1z3n5pxDYNJ7PKNDhhqJHA54VAOyJv4aqUHte0CFSnGC9YDPUVb9agtNFkxK9tt13tRyFRuGNp6ErtXw5tSTaMS/KlPhf/ydbokdQAGe5+xHOwBdeizQ48KTHFo="
  - secure: "J9zpOPPsPvzLzYETo0llCvx0RF9bz1bJj9ziroQf9/NkaFJqZKik8DZeeAqb2Ax4tQkcAdZwKhSUvZUnsGNj/vrsL1LZDkNnBEuxHrezuFQNrmvSc3IrrNu9zKg7FgeNbKYhuYJOclePNcUlH/AawMbu5jl9/nskIXdy7qhQgPDERlUcenww65Ni32ivGqVb0IpTEwMmi3sfyChxzWGmX2QEIUdjBRsIcW7EQmdYrw7GrOvqpII2KfsdSmQwVPl9iuMdXbO17IdxV2pEO6Lopa/wGnJSyP3ScsaOQhadmA6r+OZlN2zhTPkU9XcwLXMWVNkhpUuJrNhZsVEpksN4xnIQnXR0zW9fkyZZJDx/3AtOuf00BtHY0LGWABeniw37gPfJ0kyMwAL55veBWgnjYKdUcoDfWNS4GHSpZk6WhQLF9lZCLw6SxioKnEhnDefFPCWcHKvydFsLSdoYroZo83YYqVZWWRwKr4RproSFL6DiqaUpSTa8Sn6Us0D2+ckJ9TjBEfE1S2A5FNzaVPMxBdbK9N6an8NzvyZq56ZwDE31bStqGSqsTsA+0cKi0O6z39etTx/nsEWdLlUidUpDi7BWkB4hxfeo5tfnE/5y30V+BSsjUpqMzy8WFsMff4/Q+q1g6XOsWq07zpvvEeeQ8QWnGWkCjGWjrjhJMWY2A0c="
  - secure: "JvqloXkTnhOgjFhpcec0gVVObU58sXx1/dF9DuKoF8x3S5ZoKnwgvcn2PP2tW4Oyh35Ob4xNZBT61x/ErfkGK3qdrbRKCH/0/TmAQGORmcN0CbyTVs2Iub+81EA/1zR2yuxyjRXyFnz+hEpfOuooKPm8KDhWJcMbTmTCv3JDMB8yVS1DG6BC/zeBtvKfDLhiTvyM4136XF+MinxOoEaOfMCeafbb5/5jhGj2i5vaKOjg78KgQZVAyQUHvB4u40l+yc7b9yMvG6jd4QQx0p663vLRwHDHojGHxqzjay8tz4/6ENdRfbLZSWL5eRc1Us7VsM5TOzvH5wNLaC+oHxEMjW8vfm3X1eNJM8IhPEVKI5DLlOFtIt3waolg2sU6k2CudeDF8EKdhdmsYpFx/t02g/igco84NPX5QlIagOVijjgZgS6jJQDI3Kev41rsgcFGXiX05A/BtdgGfCqDjyufuWa2BjGGN0Hlq7Q6kQI7znBSJ3pDobELwzQakNmHMo/y+ujfoQLU3u0FAgzKpe4lIZFMiTO+DgdCLMycStRwBivFYmcWI7rStPkHZdZTkCac4kYFDy/6NB67SAhuJIXZklPxiGd6zsL/+HKuwy3GPouSSWIPwxZvrdVuYTYEPTNQ6qgpZTtp95SlQ6RXK/Iy6q1MMN0rHJmZyn/mfGwQeQo="
  - secure: "PQwNouDHBjw7oBPyOEpTqtgcDf4uZjkqRCxf2BzbO+c/ktddruX7PUU1Euu1UkiPp4+X/j8PRKIOsY2xMkHVHaoNo5VYXEbLu2s01h8tASoyTWjGhn/ZcNcjBa0w1OHfCgy1Myx62JJZ6GCMqcF+krTGi64PxKzFbNJKgdNPxT+oCCoCDu6wz3i9rTOHJkvwQb9R8nSMdsRZpakzoySowwkWYFLwuenegkTHcg0yrl2lfeUODyC4RSldqmax+ZuPWpt8XWXShG4+8RuwkZCfIxineY1w/15t1e/mnWJ4d3ht8DeADhuuP6X+Ckq4WLJU4wvETTrMVHdVD61lWyBRZVmSBuygdSP7vpsrPf0vWsq8BBjDdE5JFiZm/JTQ9+YMfUSGvcAN8Wuy+bEXcaX2Si/wmE3Sx9kwF3EM8BNUbWfSEFDZ9fOboBFIZjeA/Vo+Gn700nhIlQOm4lty6kJDYC/8ZYU3U7A3a7uv43UhFuZnjXhYvy+W9oZSlrPK1i3R1+bYmigpc+DIkSJG+VyaeaM5AGHGfUJZ6of/2EBcP5xytyiuiqtA50RRd67aw8rSeaBoM9IwlGwi2HMFlQBIKIEFWdjHuY5mCPCpvtXcopD2up7oaJeGTf/4jdgQswCLBlH4vE6Nvt+P1pOc7IE05+d+B4OvmjDfG95vLfFSH+U="
  - secure: "MQk171WeXillDfOjvnN/K/EOmoM+kF0CcarPK1zl+B/UkLe3kPr9rLuWodUmX7igs+uQFLQkchlr0nqvj6xoV3KtiuH/bkerOn7LPDYDHLK18vO47rzoRw6hXupCE3RRaRSpkX2GZUMhXiT3HWoFmN2wWjNDGbe1PCnQz/4XKz2ANDslvf8trBj2ZrgNtCw3gZw0KqPg0unhvf6xbXuMQAOwotcew9F+/D07JeuSthBl0VpYZGIr03Qn/OXqgjZig+8lzbhItK/kkcworVagugD0IZoSrjxlQpvdGR2s9DaIOePs7StNY81hrXOmstspbieNf7Ze1aYvpBjrtzIU4mcyxMGw7F/HvQ+L3AXkqqhZC6grRjK480hcp/GEoPB7FA8yk9kT68Gxvs0uluGXwC+H6+e9RyQuckyo3LImVhFai8r9cpoChfdj0omJkVb+8e1aKzw/8uqQx4miXAmy+tFimkTpGIlQsGY5VyqxPyo3MYEC5z9BJx8rexiN9QZtPRTp67lZxi5QscoZnjycit2iKTFwxFsIyDTx34/v+mHx7lA+QYjH66GNGRS24IUS/dZl0GGbFvG3YExTzu7LiVXa8MMVuOKxqpNlt///7p+K1PxOyz7rGDQnsQ8i9RDmAlolksCjow5e6seHOESDS87JrbTU6ZKIH+LHq8ztRqg="
  - TF_VERSION: "1.0.9"
  - LOG_LEVEL: "INFO"
  - secure: "lmA5xhiDN37E5Q/pwtZ63QZewQcCH/wu/mxmoMDGSOkwEivRJ88bhoPeesjYbIPImNmXKS4yp2tMni403xqvt4MzsNI9N+tsE0Ex/J8Xw2LY3HL60MmMPvM8p0dvlxiRElFpnI3RuFn5rTTkmkN7AGecQ3LNhCjMaJsMLAA+m0LGNto46COfITz+3tWmNomWtLGUUeGgCw3VqHbF5LzfsFAkrNMCnTtPCGpMiZsso+NvrB6AHWdxpISGfzu573LIPC9GgSG1rLFaPDT2r/sLLzlAnuL2t8PvvquSnqx1ZV1Q2wOgoxkP/RmCc3vJbGzfqN4EUU07vpySQTMxb9R62svVNswg+8xHxaj9dOAJr3Co+POf4VhboFE4gvhYvvUr/HUjJoSGtmDs3zSTA13y/XaUiRcRIKZlF/Y7M3hZjU7KGAhqz3GG2UYiM3kf07Gu9RqplaCnnHq5wE+ygLQkBYiKLqi+2fRgSLdxNBtiahYQxR92G8BDocT11+WbzwbjPAXYdV1DdHX52a/yXJ7Q0duaITVArcIZ8jfeVCXtxCnsrQyGny8DJVtxsunbo4UPe0flySVYuzfs/e224D8StOxAXf5UxEzYavX2v3lRX30QJPxhPo79cxVjk1nRhqkyWah+bwXFJL0T2p9hEmzqfG5gM4eq7UlYZIWEFlCN6GE="
  - secure: "JDKIxhCg4lwhfW3knRZJ0dpt25sQDOcUNW19OA4VFCg4gPNXgH7T2qe2WJ3UpA/RcphgOG02oonp8DbXigYG+OGsTVrGOAo43PR63TKDj/I3cEUa783aWCx55e/vj924uN7k/p2BYbEBkoBbAoh7p0vFFtjdUZoVFvpF0XzeJkqi8gQwDmU+Brr0iOcpUi+hhJUnD4Hgeie1oWYj/eK1vL2OrSr52R5EUBiEJ867aS9L/CAAsGTwDVqQ2UkPpveBrBLJe0yFTTbHOK4RWdeb/pUOcIJy9y7t45b/ZFGmg2tUYfYKurMVnuIB79c2kfgjI/UIcg4Ft4Gg8pfainWeJzUdizyRzv/n2WjlXPAG5P6X9bNgnznpoyNy/lZRqV+go1tIfTSNhWBTkDPiAY6tc3Fn6OIm6kbgb1h5LJ+vfFbqR0i2fwo0B9qgy/MvViScJz/gZwAYArEQw3uDPQNsZt+WgxBujtd+o625LORlChgfE9v/2VvaOe3qon0AiCWUVxUennBlMInFlz3kye8Ost+Qg3cYRHRRSvWXB9Waajtr/1cpGESCmhveLgFGX1Ysi67ZKrXMO5zCFMnyjWr6fTCVaYgRlIafSRGxheXmlgOwSo8p0vg4yH08hLcysO2s+jH0uagDyJq2hBs9saCxBfTCzIZBUfLUem7NTd56UI8="

script:
- docker build --target test --tag todo-app:test .
- docker run todo-app:test todo_app/tests/unit_test.py
- docker run --env-file .env.test todo-app:test todo_app/tests/test_app.py
- docker run --env MONGO_DB_CONNECTION --env MONGO_DB_NAME --env LOG_LEVEL todo-app:test todo_app/tests_e2e/test_e2e.py

install:
- wget https://releases.hashicorp.com/terraform/"$TF_VERSION"/terraform_"$TF_VERSION"_linux_amd64.zip
- unzip terraform_"$TF_VERSION"_linux_amd64.zip
- sudo mv terraform /usr/local/bin/
- rm terraform_"$TF_VERSION"_linux_amd64.zip
- terraform init

before_deploy:
- echo $DOCKER_PASSWORD | docker login --username $DOCKER_USER --password-stdin
- docker build --target production --tag $DOCKER_USER/todo-app:latest .
- docker push $DOCKER_USER/todo-app:latest
- terraform apply -auto-approve -var "prefix=lp-prod"
- export WEBHOOK_URL="$(terraform output -raw cd_webhook)"

deploy:
  provider: script
  script: bash ./deploy.sh
  on:
    branch: master

  